# Industrial Energy Synth - QA (Reaper) checklist (v1.0)

Эта памятка закрывает `M9` из `ROADMAP.md`: быстрый, повторяемый прогон, чтобы не ловить “рандомные” баги перед релизом.

## 0) Подготовка Reaper (один раз)
1. Создай новый проект.
2. `Options -> Preferences -> Plug-ins -> VST`:
   - Убедись, что папка с плагином (`C:\VST3` или системная VST3-папка) добавлена в `VST plug-in paths`.
   - Нажми `Re-scan` (если плагин не подхватился).

## 1) Быстрый Smoke test (2 минуты)
1. Добавь трек.
2. На трек добавь FX: `Industrial Energy Synth`.
3. Включи мониторинг (иконка динамика на треке).
4. Открой виртуальную MIDI-клавиатуру:
   - `View -> Virtual MIDI Keyboard` (или `Alt+B`).
5. Нажми несколько клавиш.
   - Ожидание: есть звук, нет кликов/подвисаний UI.

## 2) Project recall (сохранение/восстановление)
1. Измени несколько параметров: `Filter Cutoff`, `Destroy Mix`, `Out Gain`, `Tone EQ` (подвигай точки).
2. Сохрани проект.
3. Закрой Reaper, открой проект снова.
   - Ожидание: значения восстановились 1:1, UI не “ломается”.

## 3) MIDI/Mono поведение
1. Last-note:
   - Удерживай `C3`, нажми `E3`, отпусти `E3`.
   - Ожидание: высота возвращается к `C3`.
2. EnvMode:
   - `Retrigger`: при перекрытии нот огибающая слышимо перезапускается.
   - `Legato`: при перекрытии нот огибающая не перезапускается (меняется только высота/глайд).
3. Glide:
   - Включи Glide, поставь 300ms: при смене нот слышен плавный переход.
   - Выключи Glide: скачок мгновенный.

## 4) Destroy / OS
1. Крути `Fold/Clip/Mod/Crush` Amount/Mix.
   - Ожидание: звук “ломается”, но высота читается (не превращается в чистый хаос).
2. OS Off/2x/4x:
   - Переключай во время проигрывания.
   - Ожидание: нет краша и “диких” выбросов (краткий характерный артефакт допустим, но без взрыва уровня).

## 5) Tone EQ / Spectrum (интерактив)
1. Потяни LowCut/HighCut.
2. Потяни Peak-ноды.
3. `Shift + drag` по Peak: меняется Q (ширина).
4. Double-click по пустому месту: добавляется новый Peak (если есть свободный слот).
5. ПКМ по Peak: удаляется (disable).

## 6) Modulation “Serum-like” (DnD + ring)
1. Перетащи `M1` на `Filter Cutoff`.
   - Ожидание: появляется цветная дуга вокруг ручки.
2. Крути `Macro 1`.
   - Ожидание: Cutoff реально меняется.
3. Depth:
   - Потяни внешнее кольцо вокруг ручки вверх/вниз: меняется Depth.
   - `Shift` = fine.
4. Очистка:
   - ПКМ по ручке: меню удаления.
   - `Alt + клик по кольцу`: быстро удалить модуляции для этой ручки.

## 7) Stress/стабильность (важно)
1. Открой/закрой UI 50+ раз.
2. Поиграй быстрыми нотами 1-2 минуты.
3. Автомейшн (любая дорожка automation):
   - `filter.cutoffHz`, `destroy.*Mix`, `out.gainDb`, `tone.*`.
4. SR/Buffer changes (если твоя система позволяет):
   - смена sample rate 44.1/48/96 kHz и buffer size во время проигрывания.

Ожидание: нет крашей, нет утечек UI, нет “зависших” нот (Panic помогает).

## 8) FX Rack smoke (новый стек)
1. Включи по очереди: `Chorus`, `Delay`, `Reverb`, `Dist`, `Phaser`, `Octaver`.
2. Для каждого:
   - покрути `Mix` от 0 до 100%;
   - покрути ключевые параметры (`Rate/Depth/Drive/Feedback/Size` и т.д.);
   - быстро автомейшни 2-3 параметра одновременно.
3. Проверь `FX Global Mix`, `FX Order` (Fixed A/B), `FX Oversampling` (Off/2x/4x).
4. Проверь Mod Matrix:
   - назначь `LFO1 -> FX Delay Time`,
   - `Macro1 -> FX Dist Drive`,
   - `Aftertouch -> FX Reverb Mix`.

Ожидание:
- Нет щелчков/взрывов уровня.
- Никаких крашей при переключении FX и Oversampling.
- Модуляции ограничиваются корректно (не уходят в NaN/инфинити).

### 7.1 Stress matrix (SR / Buffer / Automation)
| SR | Buffer | Что крутить/автоматизировать | Что проверить |
|---:|---:|---|---|
| 44.1 kHz | 64 | `destroy.*`, `shaper.*`, `out.gainDb` | Нет кликов/краша, PRE/OUT clip индикаторы корректно реагируют |
| 44.1 kHz | 512 | Длинные ноты + rapid note repeat | Нет подвисших нот, корректный last-note/legato |
| 48 kHz | 128 | `filter.cutoffHz`, `tone.*`, `shaper.mix` | Automation гладкая, без zipper-шума |
| 48 kHz | 1024 | Быстрый пресет-свитч + play/stop transport | Нет утечек UI, восстановление state стабильное |
| 96 kHz | 64 | Экстремальный Destroy + Pitch Lock | Нота читается, CPU поведение предсказуемо |
| 96 kHz | 256 | Переключение OS Off/2x/4x на лету | Без крэшей/взрывных выбросов уровня |
